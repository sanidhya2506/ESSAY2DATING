<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Essay2Dating | Connection through Character</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --bg: #ffffff;
            --text: #000000;
            --gray: #666666;
            --light-gray: #f9f9f9;
            --border: #eeeeee;
        }

        /* Essential structure for Sticky Footer */
        html, body {
            height: 100%;
            margin: 0;
            scroll-behavior: smooth;
        }

        body {
            display: flex;
            flex-direction: column;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.7;
            -webkit-font-smoothing: antialiased;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        /* Navigation */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 5%;
            max-width: 1100px;
            margin: 0 auto;
            width: 100%;
            position: sticky;
            top: 0;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            border-bottom: 1px solid var(--border);
        }

        .logo { font-weight: 900; font-size: 1.2rem; text-decoration: none; color: var(--text); letter-spacing: -0.05em; }
        
        /* Desktop Nav */
        .nav-links { display: flex; align-items: center; }

        .nav-links a, .nav-links button {
            text-decoration: none;
            color: var(--gray);
            margin-left: 25px;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            transition: color 0.2s;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
        }

        .nav-links a:hover, .nav-links button:hover { color: var(--text); }
        .logout-btn { color: #ff4444 !important; }

        /* Mobile Menu Toggle */
        .mobile-menu-btn {
            display: none;
            font-size: 1.5rem;
            cursor: pointer;
            background: none;
            border: none;
        }

        /* Responsive Nav Logic */
        @media (max-width: 768px) {
            .mobile-menu-btn { display: block; }
            .nav-links {
                display: none; /* Hidden by default on mobile */
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background: white;
                padding: 20px;
                border-bottom: 1px solid var(--border);
                box-shadow: 0 10px 15px rgba(0,0,0,0.05);
            }
            .nav-links.active { display: flex; }
            .nav-links a, .nav-links button {
                margin: 15px 0;
                font-size: 1rem;
                width: 100%;
                text-align: left;
            }
        }

        /* Auth Modal */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        .auth-card {
            background: #fff;
            padding: 40px;
            width: 95%;
            max-width: 400px;
            text-align: center;
            position: relative;
            border-radius: 20px;
        }
        .auth-card h2 { margin-bottom: 10px; font-weight: 800; font-size: 2rem; letter-spacing: -0.03em; }
        .auth-card p { color: var(--gray); margin-bottom: 25px; font-size: 0.9rem; }
        
        .google-btn {
            width: 100%;
            background: #ffffff;
            color: #000;
            padding: 14px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-size: 0.9rem;
            transition: 0.3s;
            margin-bottom: 20px;
        }
        .google-btn:hover { background: #f5f5f5; }

        .divider { display: flex; align-items: center; gap: 10px; color: #ccc; margin-bottom: 20px; }
        .divider hr { flex: 1; border: 0; border-top: 1px solid #eee; }
        .divider span { font-size: 0.7rem; font-weight: 800; }

        .auth-card input {
            width: 100%;
            padding: 14px;
            margin-bottom: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
        }
        .btn-submit {
            width: 100%;
            background: #000;
            color: #fff;
            padding: 16px;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .auth-toggle { margin-top: 20px; font-size: 0.8rem; color: var(--gray); cursor: pointer; text-decoration: underline; }

        /* Content Sections */
        .page-wrapper { flex: 1 0 auto; } 
        .container { max-width: 850px; margin: 0 auto; padding: 0 25px; }
        
        .hero { text-align: center; padding: 100px 0 60px; opacity: 0; transform: translateY(30px); transition: 1s ease; }
        h1 { font-size: clamp(2.5rem, 8vw, 4.5rem); font-weight: 800; line-height: 1.1; letter-spacing: -0.05em; margin-bottom: 30px; }
        .tagline { font-size: 1.25rem; color: var(--gray); margin-bottom: 50px; }

        .cta-group { display: flex; gap: 15px; justify-content: center; margin-bottom: 40px; flex-wrap: wrap; }
        .btn { padding: 18px 35px; border: 1px solid #000; text-decoration: none; color: #000; font-weight: 700; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.05em; transition: 0.3s; cursor: pointer; border-radius: 4px; }
        .btn-black { background: #000 !important; color: #fff !important; }
        .btn:hover { transform: scale(1.02); }

        /* Philosophy Box */
        .manifesto-box {
            background: #000;
            color: #fff;
            padding: 60px 40px;
            border-radius: 24px;
            margin: 40px 0;
            text-align: center;
        }
        .manifesto-box h2 { font-size: 1.8rem; margin-bottom: 15px; }
        .manifesto-box p { opacity: 0.8; font-size: 1.1rem; }

        /* Process Content */
        .how-it-works { background: var(--light-gray); padding: 60px 40px; border-radius: 24px; margin: 60px 0; }
        .how-it-works h2 { text-align: center; margin-bottom: 40px; font-size: 2rem; font-weight: 800; }
        .step { display: flex; gap: 20px; margin-bottom: 30px; align-items: flex-start; }
        .step-num { background: #000; color: #fff; min-width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 0.8rem; }
        .step-text h3 { font-size: 1.1rem; margin-bottom: 5px; font-weight: 700; }
        .step-text p { color: var(--gray); font-size: 0.95rem; }

        /* FAQ */
        .content-block { margin: 80px 0; }
        .content-block h2 { font-size: 2rem; margin-bottom: 30px; font-weight: 800; }
        .faq-item { border-bottom: 1px solid var(--border); padding: 25px 0; cursor: pointer; }
        .faq-question { font-weight: 700; display: flex; justify-content: space-between; align-items: center; font-size: 1.1rem; }
        .faq-answer { max-height: 0; overflow: hidden; transition: 0.3s ease; color: var(--gray); font-size: 1rem; }
        .faq-item.active .faq-answer { max-height: 300px; margin-top: 15px; }
        .faq-question span { transition: transform 0.3s; }
        .faq-item.active .faq-question span { transform: rotate(45deg); }

        /* Footer */
        footer { flex-shrink: 0; padding: 80px 0; border-top: 1px solid var(--border); text-align: center; font-size: 0.85rem; color: var(--gray); background: #fff; }
        .footer-socials { margin-top: 20px; display: flex; justify-content: center; gap: 20px; font-size: 1.2rem; }
        .footer-socials a { color: var(--gray); transition: 0.3s; text-decoration: none; }
        .footer-socials a:hover { color: #000; }
    </style>
</head>
<body>

    <nav>
        <a href="index.html" class="logo">ESSAY2DATING</a>
        <button class="mobile-menu-btn" id="mobile-toggle"><i class="fa-solid fa-bars"></i></button>
        <div class="nav-links" id="nav-list"></div>
    </nav>

    <div class="modal-overlay" id="auth-modal">
        <div class="auth-card">
            <i class="fa-solid fa-xmark" id="close-auth" style="position:absolute; top:20px; right:20px; cursor:pointer;"></i>
            <h2 id="auth-title">Welcome</h2>
            <p id="auth-subtitle">Read hearts, not bios.</p>
            
            <button class="google-btn" id="google-login-btn">
                <i class="fa-brands fa-google"></i> Continue with Google
            </button>

            <div class="divider">
                <hr> <span>OR</span> <hr>
            </div>

            <input type="email" id="email" placeholder="Email Address">
            <input type="password" id="password" placeholder="Password">
            <button class="btn-submit" id="auth-action-btn">Enter Room</button>
            
            <p class="auth-toggle" id="toggle-auth">New here? Create an account</p>
        </div>
    </div>

    <div class="page-wrapper">
        <main class="container">
            <section class="hero" id="hero-section">
                <h1>Fall in love with <br>a story, not a profile.</h1>
                <p class="tagline">The world's first dating archive where character is verified by friends and chemistry is built on conversation.</p>
                
                <div class="cta-group">
                    <button class="btn btn-black" id="hero-read-btn">The Reading Room</button>
                    <button class="btn" id="hero-join-btn">Submit an Essay</button>
                </div>
                <p style="font-size: 0.8rem; color: var(--gray); margin-top: 20px;">
                    Have a friend here? <a href="reference.html" style="color: #000; font-weight: 700;">Vouch for them.</a>
                </p>
            </section>

            <section class="manifesto-box">
                <h2>The Anti-Ghosting Promise</h2>
                <p>We don't do "Hey." Because you start with an essay, you already have something real to talk about. This is a community for high-intent souls who are tired of shallow swiping.</p>
            </section>

            <section class="how-it-works">
                <h2>The Process</h2>
                <div class="step">
                    <div class="step-num">1</div>
                    <div class="step-text">
                        <h3>Write Without Filter</h3>
                        <p>Share your core, your joy, and your flaws. We don't use photos because we want people to see *you* first.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-num">2</div>
                    <div class="step-text">
                        <h3>The Human Vouch</h3>
                        <p>A "Vouch" is a character reference from a best friend. It tells the community that you are real and reliable.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-num">3</div>
                    <div class="step-text">
                        <h3>Request Connection</h3>
                        <p>Found a story you love? Request to talk. If they accept, we open a private channel for both of you.</p>
                    </div>
                </div>
            </section>

            <div style="text-align: center; margin-bottom: 80px;">
                <h3 style="font-weight: 800; margin-bottom: 10px;">Privacy by Design</h3>
                <p style="color: var(--gray); font-size: 0.9rem; max-width: 600px; margin: 0 auto;">No tracking. No public profiles. Your story is only visible to logged-in, verified members. You stay anonymous until you choose to connect.</p>
            </div>

            <section class="content-block">
                <h2>Common Questions</h2>
                <div class="faq-item">
                    <div class="faq-question">Why no pictures? <span>+</span></div>
                    <div class="faq-answer">Pictures create split-second judgments. Essays create deep curiosity. We prioritize the latter. Connection starts in the mind.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">How does a 'Vouch' work? <span>+</span></div>
                    <div class="faq-answer">Your friend fills out a short form about your character. This appears at the bottom of your essay for others to see, providing real-world verification.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">Is my email public? <span>+</span></div>
                    <div class="faq-answer">No. Your email and contact details are only shared if you explicitly accept a connection request from someone else.</div>
                </div>
            </section>
        </main>
    </div>

    <footer>
        <p><b>ESSAY2DATING</b></p>
        <p>&copy; 2026. Connection through character. Created with â™¡ by Sanidhya.</p>
        <div class="footer-socials">
            <a href="https://www.instagram.com/sanidhya.does" target="_blank"><i class="fa-brands fa-instagram"></i></a>
            <a href="https://www.linkedin.com/in/sanidhya-sharma-22ba91237/" target="_blank"><i class="fa-brands fa-linkedin-in"></i></a>
            <a href="https://github.com/sanidhya2506" target="_blank"><i class="fa-brands fa-github"></i></a>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { 
            getAuth, 
            signInWithPopup, 
            signInWithRedirect,
            getRedirectResult,
            GoogleAuthProvider, 
            signInWithEmailAndPassword, 
            createUserWithEmailAndPassword, 
            onAuthStateChanged, 
            signOut,
            sendEmailVerification 
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyB4XAA6lWxC-9-TK5TCYlvpwGSm1jnv3No",
            authDomain: "essay2dating.firebaseapp.com",
            projectId: "essay2dating",
            storageBucket: "essay2dating.firebasestorage.app",
            messagingSenderId: "643570105958",
            appId: "1:643570105958:web:1f4609c42610640cf937a7"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth();
        const provider = new GoogleAuthProvider();

        const authModal = document.getElementById('auth-modal');
        const navList = document.getElementById('nav-list');
        const heroSection = document.getElementById('hero-section');
        const mobileToggle = document.getElementById('mobile-toggle');
        let isLoginMode = true;

        // Hamburger Menu Logic
        mobileToggle.onclick = () => navList.classList.toggle('active');

        // Handling Google Redirect Result (Fix for Mobile)
        getRedirectResult(auth).then((result) => {
            if (result?.user) {
                authModal.style.display = 'none';
            }
        }).catch((error) => {
            console.error("Redirect Error:", error);
        });

        onAuthStateChanged(auth, (user) => {
            if (user) {
                const isPasswordUser = user.providerData.some(p => p.providerId === 'password');
                
                if (isPasswordUser && !user.emailVerified) {
                    navList.innerHTML = `<button class="logout-btn" id="logout-btn">Logout</button>`;
                    heroSection.innerHTML = `
                        <h1 style="font-size:3rem;">Check your inbox.</h1>
                        <p class="tagline">We sent a verification link to <b>${user.email}</b>. <br>Please verify your email to unlock the room.</p>
                        <button class="btn btn-black" onclick="window.location.reload()">I've Verified My Email</button>
                        <p style="margin-top:20px; font-size:0.8rem; color:gray;">Don't see it? Check your spam.</p>
                    `;
                    document.getElementById('logout-btn').onclick = () => signOut(auth).then(() => window.location.reload());
                    return; 
                }

                navList.innerHTML = `
                    <a href="index.html">Home</a>
                    <a href="create.html">Write</a>
                    <a href="profile.html">Read</a>
                    <a href="reference.html">Vouch</a>
                    <button class="logout-btn" id="logout-btn">Logout</button>
                `;
                document.getElementById('logout-btn').onclick = () => signOut(auth).then(() => window.location.reload());
                
                // Hero Button Handlers
                const readBtn = document.getElementById('hero-read-btn');
                const joinBtn = document.getElementById('hero-join-btn');
                if(readBtn) readBtn.onclick = () => window.location.href = "profile.html";
                if(joinBtn) joinBtn.onclick = () => window.location.href = "create.html";

            } else {
                const openAuth = (mode) => {
                    isLoginMode = mode;
                    updateAuthUI();
                    authModal.style.display = 'flex';
                    navList.classList.remove('active'); // Close mobile menu if open
                };
                navList.innerHTML = `
                    <a href="index.html">Home</a>
                    <button id="nav-login-btn">Login</button>
                    <button id="nav-join-btn" style="background:#000; color:#fff; padding: 8px 15px; border-radius: 5px; margin-left: 15px;">Join</button>
                `;
                document.getElementById('nav-login-btn').onclick = () => openAuth(true);
                document.getElementById('nav-join-btn').onclick = () => openAuth(false);
                document.getElementById('hero-read-btn').onclick = () => openAuth(true);
                document.getElementById('hero-join-btn').onclick = () => openAuth(false);
            }
        });

        function updateAuthUI() {
            document.getElementById('auth-title').innerText = isLoginMode ? 'Welcome Back' : 'Create Account';
            document.getElementById('auth-action-btn').innerText = isLoginMode ? 'Enter Room' : 'Sign Up';
            document.getElementById('toggle-auth').innerText = isLoginMode ? 'New here? Create an account' : 'Already have an account? Login';
        }

        // Improved Google Auth for Mobile
        document.getElementById('google-login-btn').onclick = async () => {
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            try {
                if (isMobile) {
                    await signInWithRedirect(auth, provider);
                } else {
                    await signInWithPopup(auth, provider);
                    authModal.style.display = 'none';
                }
            } catch (err) {
                console.error("Google Auth Error:", err);
                alert("Login failed: " + err.message);
            }
        };

        document.getElementById('auth-action-btn').onclick = async () => {
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value.trim();
            const btn = document.getElementById('auth-action-btn');

            if(!email || !password) {
                alert("Please fill in both email and password.");
                return;
            }

            btn.innerText = "Processing...";
            btn.disabled = true;

            try {
                if (isLoginMode) {
                    await signInWithEmailAndPassword(auth, email, password);
                } else {
                    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                    await sendEmailVerification(userCredential.user);
                    alert("Account created! Verification link sent to " + email);
                }
                authModal.style.display = 'none';
            } catch (err) {
                console.error("Firebase Auth Error:", err.code);
                if (err.code === 'auth/invalid-credential') {
                    alert("Incorrect email or password. If you're new, click 'Create an account'.");
                } else {
                    alert(err.message);
                }
            } finally {
                btn.disabled = false;
                btn.innerText = isLoginMode ? 'Enter Room' : 'Sign Up';
            }
        };

        document.getElementById('toggle-auth').onclick = () => {
            isLoginMode = !isLoginMode;
            updateAuthUI();
        };

        document.getElementById('close-auth').onclick = () => authModal.style.display = 'none';

        window.onload = () => {
            heroSection.style.opacity = "1";
            heroSection.style.transform = "translateY(0)";
        };

        // FAQ Logic
        const faqItems = document.querySelectorAll('.faq-item');
        faqItems.forEach(item => {
            item.onclick = () => {
                const wasActive = item.classList.contains('active');
                faqItems.forEach(i => i.classList.remove('active'));
                if (!wasActive) item.classList.add('active');
            };
        });
    </script>
</body>
</html>